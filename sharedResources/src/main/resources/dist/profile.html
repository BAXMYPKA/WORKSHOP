<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:th="http://www.thymeleaf.org"
	  xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{./layouts/layout.html}">
<head>
	<meta charset="UTF-8">
	<link rel="stylesheet" href="css/profile.css" th:href="@{/dist/css/profile.css}">
	<title th:text="#{html.a.title.profile}">Profile</title>
</head>
<body>

<th:block layout:fragment="articleFragment">
	
	<h1 th:text="#{html.h1.profile}">Your profile</h1>
	
	<div class="profileTableContainer">
		
		<form class="userProfileForm" action="profile.html" method="POST" name="user"
			  th:action="@{/profile}">
			
			<table class="userProfileTable" th:unless="${user == null}">
				
				<caption title th:text="#{html.thead.profile.tableName}">
					User profile details
				</caption>
				<tr>
					<th th:text="#{properties.firstName}">
						First name
					</th>
					<td th:text="${user?.firstName}">
						User first name
					</td>
					<td>
						<input type="text" placeholder="First name" name="firstName" th:value="${user?.firstName}">
					</td>
					<td class="errorMessage" th:if="${#fields.hasErrors('user.firstName')}"
						th:errors="*{user.firstName}">
						Possible error
					</td>
				
				</tr>
				<tr>
					<th th:text="#{properties.lastName}">
						Last name
					</th>
					<td th:text="${user?.lastName}">
						User last name
					</td>
					<td>
						<input type="text" placeholder="Last name" name="lastName" th:value="${user?.lastName}">
					</td>
					<td class="errorMessage" th:if="${#fields.hasErrors('user.lastName')}" th:errors="*{user.lastName}">
						Possible error
					</td>
				
				</tr>
				<tr>
					<th th:text="#{properties.email}">
						Email
					</th>
					<td th:text="${user?.email}">
						User email
					</td>
					<td>
						<input type="text" placeholder="user@mail.pro" name="email" th:value="${user?.email}">
					</td>
					<td class="errorMessage" th:if="${#fields.hasErrors('user.email')}" th:errors="*{user.email}">
						Possible error
					</td>
				
				</tr>
				<tr>
					<th th:text="#{properties.birthday}">
						Birthday
					</th>
					<td th:text="${#temporals.format(user?.birthday, 'yyyy-MM-dd')}">
						User date of birth
					</td>
					<td>
						<input type="date" name="birthday" th:value="${user?.birthday}">
					</td>
				</tr>
				<td class="errorMessage" th:if="${#fields.hasErrors('user.birthday')}" th:errors="*{user.birthday}">
					Possible error
				</td>
				
				<tr>
					<th th:text="#{properties.language}">
						Language
					</th>
					<td th:text="${#strings.toUpperCase(user?.languageTag)}">
						User language
					</td>
					<td>
						<input hidden type="text" placeholder="RU" name="languageTag" th:value="${user?.languageTag}">
					</td>
				</tr>
				
				<tr th:unless="${user.phones == null}" th:each="phone : ${user?.phones}">
					<th th:text="#{properties.phone} + ': ' + ${phone?.name}">
						Phone name
					</th>
					<td th:text="${phone.phone}">
						Phone
					</td>
					<td>
						<input type="tel" th:value="${phone.phone}">
					</td>
					<td class="errorMessage" th:if="${#fields.hasErrors('user.phones')}" th:errors="*{user.phones}">
						Possible error
					</td>
				</tr>
				
				<tr>
					<td></td>
					<td></td>
					<td>
						<button class="buttonLogin" value="Save changes" onclick="this.form.submit()"
								th:text="#{html.submit.saveChanges}">
							Save changes
						</button>
					</td>
				</tr>
			
			</table>
		
		</form>
	
	</div>

</th:block>

</body>
</html>